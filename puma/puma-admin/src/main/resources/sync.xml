<?xml version="1.0" encoding="UTF-8"?>
<sync xmlns="puma.dianping.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <!-- 同步目标的mysql配置 -->
    <dest>
        <host>192.168.7.43:3306</host>
        <username>binlog</username>
        <password>binlog</password>
    </dest>
    <!-- 同步源配置：PumaClient相关的配置 -->
    <src>
        <pumaServerHost>127.0.0.1:8080</pumaServerHost>
        <BinlogFile>binlog</BinlogFile>
        <BinlogPosition>123</BinlogPosition>
        <name>testClient</name>
        <serverId>6667</serverId>
        <dml>true</dml>
        <ddl>true</ddl>
        <target>Dianping</target>
        <transaction>false</transaction>
    </src>
    <instance>
        <database from="pumatest" to="pumatest">
            <table from="test1" to="test1">
                <column from="id" to="id" primary="true" />
                <column from="name" to="name" />
                <column from="desc" to="desc" />
            </table>
            <table from="test2" to="test23" partOf="true">
                <column from="id" to="id" primary="true" />
                <column from="name" to="name1" />
            </table>
            <table from="test3" to="test23" partOf="true">
                <column from="id" to="id" primary="true" />
                <column from="name" to="name2" />
            </table>
            <!-- #regex(test_[0-31])这部分在admin端解析好变成多个<table配置> -->
            <!-- <table from="#regex(test_[0-31])" to="#partition(test_[$uid/2])" 
                partOf="true"> <column from="id" to="id" primary="true" /> <column from="name" 
                to="name1" /> </table> -->
            <table from="test" to="#partition(part_[$uid%2])">
                <column from="uid" to="uid" primary="true" />
                <column from="name" to="name" />
                <column from="desc" to="desc" />
            </table>
            <table from="*" to="*"></table>
        </database>
    </instance>
</sync>
